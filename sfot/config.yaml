processing:
  frame_rate: 0.2 # 1 frame every 5 seconds
  queue_size: 10
  timeout: 1800 # 30 minutes max per chunk
  batch_update_interval: 20 # Update Supabase every 20 seconds

detection:
  threshold: 0.78
  crop_region: [271, 54, 503, 352] # nameplate region on a 480p matchup frame w, h, x, y Includes rank emblem
  template_path: "templates/matchup_template.png"

# Emblem detection and removal configuration
emblem_detection:
  enabled: true
  threshold: 0.25
  expand_pixels: 10
  templates_dir: "templates/"

# OCR preprocessing based on tuned parameters
ocr_preprocessing:
  scale_factor: 3.0
  gaussian_blur: 2
  clahe_enabled: true
  clahe_clip: 1.4
  clahe_grid: 11
  binary_threshold: 154
  invert: true

resources:
  max_memory_mb: 512
  max_cpu_percent: 50

streamlink:
  default_stream: "480p"
  fallback_streams: ["360p", "worst"]
  retry_attempts: 3
  retry_delay: 5

ffmpeg:
  keyframes_only: true
  output_format: "mjpeg"
  loglevel: "warning"

tesseract:
  lang: "eng"
  config: "-c tessedit_char_whitelist=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-. -c load_system_dawg=0 -c load_freq_dawg=0"
  psm: 7 # Single text line
  oem: 1 # LSTM OCR Engine mode
  dpi: 480 # Higher DPI for better accuracy
  timeout: 5

supabase:
  storage_bucket: "detections"
  batch_size: 10
  connection_timeout: 30
  retry_attempts: 3

logging:
  level: "INFO"
  format: "json"
  max_file_size_mb: 50
  backup_count: 3
